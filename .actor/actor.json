{
	"actorSpecification": 1,
	"name": "cr-reminder",
	"title": "CR Review / QA Duration Monitor",
	"description": "Measures how long issues stay in Review/QA pipelines (ZenHub) via GraphQL or REST.",
	"version": "0.0",
	"buildTag": "latest",
	"meta": {
		"templateId": "ts-empty"
	},
	"dockerfile": "../Dockerfile",
	"input": {
		"schemaVersion": 1,
		"title": "Input",
		"type": "object",
		"description": "Configure data source (GraphQL workspace or REST repositories) and pipelines.",
		"properties": {
			"slackWebhookUrl": {
				"title": "Slack Webhook URL",
				"type": "string",
				"description": "Slack webhook URL to send notifications about pending reviews.",
				"editor": "textfield"
			},
			"zenhubToken": {
				"title": "ZenHub Token",
				"type": "string",
				"description": "Personal access token for ZenHub (GraphQL + REST).",
				"editor": "textfield",
				"isSecret": true
			},
			"graphqlEndpoint": {
				"title": "GraphQL Endpoint",
				"type": "string",
				"default": "https://api.zenhub.com/public/graphql",
				"description": "ZenHub GraphQL endpoint URL (for GraphQL mode).",
				"editor": "textfield"
			},
			"workspaceIds": {
				"title": "Workspace IDs",
				"type": "array",
				"items": {
					"type": "string"
				},
				"editor": "stringList",
				"uniqueItems": true,
				"description": "List of ZenHub workspace IDs."
			},
			"targetPipelines": {
				"title": "Target Pipelines",
				"type": "array",
				"items": {
					"type": "string"
				},
				"editor": "stringList",
				"default": ["Review/QA"],
				"minItems": 1,
				"description": "Pipeline names to measure duration in (e.g., Review/QA, Review, QA)."
			},
			"sendEmptyReport": {
				"title": "Send Empty Report",
				"type": "boolean",
				"default": true,
				"description": "If true, send 'all good' message to Slack when no issues to report; if false, don't send anything.",
				"editor": "checkbox"
			},
			"maxIssues": {
				"title": "Max Issues",
				"type": "integer",
				"default": 100,
				"minimum": 1,
				"editor": "number",
				"description": "Upper limit of issues processed per workspace or repository."
			},			
			"warningThresholdDays": {
				"title": "Warning Threshold (days)",
				"type": "integer",
				"default": 3,
				"minimum": 1,
				"editor": "number",
				"description": "Number of days after which issues start showing with warning emoji (‚ö†Ô∏è).",
				"sectionCaption": "Thresholds",
				"sectionDescription": "Configure when issues should be flagged based on duration in pipeline"
			},
			"urgentThresholdDays": {
				"title": "Urgent Threshold (days)",
				"type": "integer",
				"default": 5,
				"minimum": 1,
				"editor": "number",
				"description": "Number of days after which issues get an urgent emoji (üö®)."
			},
			"criticalThresholdDays": {
				"title": "Critical Threshold (days)",
				"type": "integer",
				"default": 7,
				"minimum": 1,
				"editor": "number",
				"description": "Number of days after which issues get a critical emoji (üò±)."
			}			
		},
		"required": ["slackWebhookUrl", "zenhubToken", "targetPipelines", "sendEmptyReport"]
	}
}